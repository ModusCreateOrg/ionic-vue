<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Ionic v4 + Vue.js - ion-nav routing</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <script src="https://unpkg.com/vue"></script>
        <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
        <script src="https://unpkg.com/@modus/ionic-vue@1.0.5/dist/ionic-vue.js"></script>
        <script src="https://unpkg.com/@ionic/core@4.0.0-beta.2/dist/ionic.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/@ionic/core@4.0.0-beta.2/css/ionic.min.css"/>
    </head>

    <body>
        <ion-app></ion-app>

        <script>
            const Toolbar = Vue.component('Toolbar', {
                name: 'Toolbar',
                props: { title: String, backURL: String },
                template: `<ion-header>
                    <ion-toolbar>
                        <ion-buttons slot="start">
                            <ion-back-button :default-href="backURL"/>
                        </ion-buttons>
                        <ion-title>{{ title }}</ion-title>
                    </ion-toolbar>
                </ion-header>`
            })

            const Home = {
                template: `<ion-page class="ion-page">
                    <toolbar title="Home"/>
                    <ion-content class="ion-content" padding>
                        <ion-button @click="goPage">Go to page</ion-button>
                        <ion-button @click="goPageWithData">Go to page with data</ion-button>
                    </ion-content>
                </ion-page>`,
                methods: {
                    goPage() {
                        this.$ionic.newNavController().then(ctrl => ctrl.push(Page))
                    },
                    goPageWithData() {
                        this.$ionic.newNavController().then(ctrl => ctrl.push(Page, { buttonText: 'New text' }))
                    }
                }
            }

            const Page = {
                props: {
                    buttonText: {
                        type: String,
                        default: 'Go home',
                    },
                },
                template: `<ion-page class="ion-page">
                    <toolbar title="Page" backURL="/"/>
                    <ion-content class="ion-content" padding>
                        <ion-button @click="goHome">{{ buttonText }}</ion-button>
                    </ion-content>
                </ion-page>`,
                methods: {
                    goHome() {
                        this.$ionic.newNavController().then(ctrl => ctrl.popToRoot())
                    }
                }
            }

            Vue.use(IonicVue.IonicAPI)

            new Vue({
                mounted() {
                    this.$ionic.newNavController(Home)
                }
            }).$mount('ion-app')
        </script>
    </body>
</html>
